<Window x:Class="DriftOS.App.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DriftOS Settings" Height="520" Width="520" MinHeight="420"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        Background="#0F1115" Foreground="#EDEFF2"
        UseLayoutRounding="True" SnapsToDevicePixels="True">

    <Window.Resources>
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#EDEFF2"/>
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Foreground" Value="#EDEFF2"/>
        </Style>
    </Window.Resources>


    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="16" >

            <!-- Pointer speed -->
            <TextBlock Text="Pointer Speed" FontSize="16" Margin="0,0,0,6"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="100" />
                </Grid.ColumnDefinitions>
                <Slider Grid.Column="0"
                Minimum="0.30" Maximum="2.50" TickFrequency="0.05"
                Value="{Binding PointerSpeed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Grid.Column="1"
                   Text="{Binding PointerSpeed, Mode=OneWay, StringFormat={}{0:F2}}"
                   FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center" />
            </Grid>
            <TextBlock Text="Scales cursor speed. 1.00 = default." FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>

            <!-- Scroll speeds -->
            <TextBlock Text="Scroll Speeds (Right Stick + D-pad)" FontSize="16" Margin="0,6,0,6"/>
            <!-- Vertical -->
            <Grid Margin="0,0,0,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Vertical" VerticalAlignment="Center" Opacity="0.8"/>
                <Slider Grid.Column="1"
                Minimum="0.30" Maximum="2.50" TickFrequency="0.05"
                Value="{Binding ScrollSpeedV, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Grid.Column="2"
                   Text="{Binding DisplayScrollSpeedV, Mode=OneWay}"
                   FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center"/>
            </Grid>

            <!-- Horizontal -->
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Horizontal" VerticalAlignment="Center" Opacity="0.8"/>
                <Slider Grid.Column="1"
                Minimum="0.30" Maximum="2.50" TickFrequency="0.05"
                Value="{Binding ScrollSpeedH, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Grid.Column="2"
                   Text="{Binding DisplayScrollSpeedH, Mode=OneWay}"
                   FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center"/>
            </Grid>

			<!-- Autostart -->
			<StackPanel Orientation="Horizontal" Margin="0,0,0,14">
				<CheckBox Content="Start with Windows"
						  IsChecked="{Binding AutoStart, Mode=TwoWay}"
						  Foreground="#EDEFF2"/>
			</StackPanel>

			<!-- Invert + deadzone -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,14">
                <CheckBox Content="Invert Vertical Scroll"
                  IsChecked="{Binding InvertScrollV, Mode=TwoWay}"
                  Margin="0,0,16,0"/>
                <CheckBox Content="Invert Horizontal Scroll"
                  IsChecked="{Binding InvertScrollH, Mode=TwoWay}"/>
            </StackPanel>

            <!-- Deadzone -->
            <TextBlock Text="Stick Deadzone" FontSize="16" Margin="0,0,0,6"/>
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="100" />
                </Grid.ColumnDefinitions>
                <Slider Grid.Column="0"
                Minimum="0.00" Maximum="0.30" TickFrequency="0.01"
                Value="{Binding Deadzone, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Grid.Column="1"
                   Text="{Binding Deadzone, Mode=OneWay, StringFormat={}{0:F3}}"
                   FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center"/>
            </Grid>
            <TextBlock Text="Ignore tiny stick movement near center. Higher = more stable, less responsive."
                 FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>

            <!-- Advanced -->
            <GroupBox Header="Advanced (Smoothing &amp; Curve)" Padding="10" Margin="0,0,0,14" BorderBrush="#2a2f3a">
                <StackPanel>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Pointer Smoothing α" VerticalAlignment="Center" Opacity="0.8"/>
                        <Slider Grid.Column="1"
                    Minimum="0.10" Maximum="0.90" TickFrequency="0.01"
                    Value="{Binding PointerAlpha, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Grid.Column="2"
                       Text="{Binding PointerAlpha, Mode=OneWay, StringFormat={}{0:F2}}"
                       FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Scroll Smoothing α" VerticalAlignment="Center" Opacity="0.8"/>
                        <Slider Grid.Column="1"
                    Minimum="0.10" Maximum="0.90" TickFrequency="0.01"
                    Value="{Binding ScrollAlpha, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Grid.Column="2"
                       Text="{Binding ScrollAlpha, Mode=OneWay, StringFormat={}{0:F2}}"
                       FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Scroll Curve γ" VerticalAlignment="Center" Opacity="0.8"/>
                        <Slider Grid.Column="1"
                    Minimum="1.00" Maximum="2.50" TickFrequency="0.05"
                    Value="{Binding ScrollGamma, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Grid.Column="2"
                       Text="{Binding ScrollGamma, Mode=OneWay, StringFormat={}{0:F2}}"
                       FontFamily="Consolas" TextAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                </StackPanel>
            </GroupBox>

			<GroupBox Header="Game-Aware Auto-Pause" Margin="8" Foreground="White">
				<StackPanel Margin="8" Orientation="Vertical" >

					<CheckBox
					  Content="Pause when a fullscreen app is active"
					  IsChecked="{Binding PauseInFullscreenApps, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
					  Margin="0,0,0,8"/>

					<TextBlock Text="Blocked processes (wildcards allowed; separated by ; or ,)"
							   Margin="0,0,0,4" Opacity="0.8"/>

					<TextBox
					  Text="{Binding BlockedProcesses, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
					  AcceptsReturn="True"
					  TextWrapping="Wrap"
					  MinLines="2"
					  MaxLines="4"
					  VerticalScrollBarVisibility="Auto"
					  FontFamily="Consolas"
      />
					<TextBlock Margin="0,6,0,0" Opacity="0.7">
						<Run Text="Examples: "/>
						<Run Text="cs2.exe; eldenring.exe; *ue4*.exe"/>
					</TextBlock>

				</StackPanel>
			</GroupBox>


			<!-- Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Restore Defaults" Margin="0,0,8,0" Padding="10,6" Click="OnRestoreDefaults"/>
                <Button Content="Save" Margin="0,0,8,0" Padding="14,6" Click="OnSave"/>
                <Button Content="Close" Padding="14,6" Click="OnClose"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</Window>
